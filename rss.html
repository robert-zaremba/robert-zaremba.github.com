<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>Robert Zaremba Scale it blog</title>
        <link>http://rz.scale-it.pl/</link>
        <description>Information Technology and programming thoughts by Robert Zaremba</description>
        <language>en-us</language>
        <pubDate>Wed, 21 Jan 2015 00:00:00 +0100</pubDate>
        
        <item>
            <link>http://rz.scale-it.pl/2015/01/21/a_simple_way_for_polymorphism_and_structured_programming___go_interfaces.html</link>
            <guid>http://rz.scale-it.pl/2015/01/21/a_simple_way_for_polymorphism_and_structured_programming___go_interfaces.html</guid>
            <title><![CDATA[A simple way for polymorphism and structured programming - Go interfaces]]></title>
            <description><![CDATA[<div class="section" id="a-simple-way-for-polymorphism-and-structured-programming-go-interfaces">
<h1>A simple way for polymorphism and structured programming - Go interfaces</h1>
<p>On 2015-01-08 I was presenting different polymorphism methods at <a class="reference external" href="http://ii.uni.wroc.pl/en">Institute of Computer Science  University of Wrocław</a>. I’m a big fan of simplicity in IT.
During that presentation I was trying to persuade why we need simplicity in IT: both for maintenance and high quality software.
One of the most important programming language feature to make a program source code more conscious is <em>polymorphism</em>.</p>
<p>Polymorphism is a very broad term. It can mean anything from having different shapes to sharing some functionality. It can be very powerful (eg <a class="reference external" href="http://haskell.org">Haskell</a>, <a class="reference external" href="http://en.wikipedia.org/wiki/Agda_%28programming_language%29">Agda</a>), mean (<a class="reference external" href="http://en.wikipedia.org/wiki/C_%28programming_language%29">C</a>), flexible / dynamic (<a class="reference external" href="http://python.org">Python</a>) or powerful-obscured (<a class="reference external" href="http://scala-lang.org">Scala</a>). There are hundreds of features researches are implementing in theirs programming languages. However, It’s a difficult art to select a minimum set of features which will bring simplicity and productivity.</p>
<p>My lecture leads to one language which accomplish that art pretty well: <a class="reference external" href="http://golang.org">Go</a>.
It still lacks few features to get a really good productivity (eg <em>genetics</em>, however thanks to <a class="reference external" href="http://golang.org/s/go1.4-generate">go generate</a> we have some workaround).</p>
<p>I’m calling this achievement <strong>Zen of Go</strong>: it provides a minimal, basic syntax and constructs in a spirit of <a class="reference external" href="https://www.python.org/dev/peps/pep-0020">Zen of Python</a>, powerful runtime with build-in coroutine scheduler (in Go we call them goroutines), convenient structures for parallelism and static typing - just to name few of them. What’s really important the language is minimalist - check the <a class="reference external" href="http://golang.org/ref/spec">Go lang spec</a> and try to compare it to any other popular language.</p>
<p>All in all, the overall result is remarkable. There are thousands of blog posts about Go, both positive and negatives (in my opinion people who present Go in a bad shape either didn’t use Go or they use it in a wrong domain - think about using assembler in web programming). One is sure: a lot of companies are migrating their software to Go (with Google in the first place). Recently, with 1.4 release <a class="reference external" href="http://vimeo.com/115307069">Go become first class language on Android</a>. Companies are happily sharing <a class="reference external" href="http://blog.gopheracademy.com/birthday-bash-2014/go-turns-5">success stories</a>. This proves that decisions for simplicity and a dynamic (<em>weak</em>) polymorphism (which is the usual wart in the <em>negative</em> go related articles) are working well for big projects.
Personally I’m using Go in production since the end of 2012 and I’m very happy for it. It doesn’t fit well for all domains I’m working in (eg. for data mining environments like matlab or lua-torch are better situated) - but as always, let’s use the right tool for the job.</p>
<p>Please enjoy my presentation:</p>
<iframe allowfullscreen="true" frameborder="0" height="355" marginheight="0" marginwidth="0" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/43759232" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" width="425"> </iframe> <div style="margin-bottom:5px"> <a href="http://www.slideshare.net/robertzaremba/go-polymorphism" target="_blank" title="A simple way for polymorphism and structured programming - Go interfaces">A simple way for polymorphism and structured programming - Go interfaces</a>.</div><div class="section" id="bottom-line-after-presentation-ii">
<h2>Bottom line after presentation @ii</h2>
<p>During the presentation there was a weird guy who was suggesting that Rob Pike will kill for not using go.talks (he even didn’t know a name of the tool). I’m still alive!</p>
</div>
</div>]]></description>
            <category><![CDATA[ programming ]]></category>
             <pubDate>Wed, 21 Jan 2015 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/10/20/frontend_components_in_react.html</link>
            <guid>http://rz.scale-it.pl/2013/10/20/frontend_components_in_react.html</guid>
            <title><![CDATA[Frontend components in React]]></title>
            <description><![CDATA[<div class="section" id="frontend-components-in-react">
<h1>Frontend components in React</h1>
<p>Last week I made a presentation for <a class="reference external" href="http://summit.meetjs.pl">meet.js PL</a> about <a class="reference external" href="http://facebook.github.io/react">React</a>. <em>meet.js</em> is a free front-end meetup organized by web enthusiasts in 6 major Polish cities - Warsaw, Gdańsk, Poznań, Wrocław, Cracow and Katowice.</p>
<p>In a nutshell, I presented why we chose React among other available options (ember.js, angular, backbone ...) in <a class="reference external" href="http://agflow.com">AgFlow</a>, where I’m leading an application development.</p>
<p>Also I try to highlight some problems with <em>MVC pattern everywhere</em>.</p>
<p>I really like a way of React frontend components development. It makes more clear for us to implement use cases views.</p>
<p>Enjoy! <br/> <br/></p>
<iframe allowfullscreen="true" frameborder="0" height="468" mozallowfullscreen="true" src="https://docs.google.com/presentation/d/1JSFbjCuuexwOHCeHWBMNRIJdyfD2Z0ZQwX65WOWkfaI/embed?start=false" webkitallowfullscreen="true" width="600"> </iframe><div class="section" id="meet-js-notes">
<h2>meet.js notes</h2>
<p>After the presentation I was asked several times how react handles relation with a model we want to present. During the talk a wanted to highlight that React is not about implementing a <em>Model</em>, but a way to construct visible components with some state. React is simple. It is super simple, you can learn it in 1h. On the other hand what is model? Which functionality it should provide? React does one thing and does it the best (for me)!</p>
<p>There are bunch of libraries which handle non visible part of web front-end, which we can easily incorporate for:</p>
<ul class="simple">
<li>browser-server real-time synchronization</li>
<li>routing</li>
<li>collections</li>
<li>router</li>
<li>history</li>
<li>schema</li>
<li>cache, storage</li>
<li>templates (still we didn’t encounter a use-case to even think about them)</li>
<li>proxy ...</li>
<li>notifications</li>
</ul>
<p>It’s worth nothing that some of those features are such easy to achieve, that we don’t need to use a heavy machinery to implement it.</p>
<div class="section" id="in-angular-i-can-do-x">
<h3>In Angular I can do X</h3>
<p>Sure, there are bunch of features implemented in Angular which are not available in React. I admit that React is not as powerful as Backbone.  Again: <em>React does one thing and does it the best (for me)</em>! But we are super satisfied what it does.</p>
<p>We could afford for a choice of technology. We chose React.</p>
</div>
</div>
</div>]]></description>
            <category><![CDATA[ frontend ]]></category>
             <pubDate>Sun, 20 Oct 2013 00:00:00 +0200</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/04/30/which_technology_for_realtime_communicaton_for_a_web_app_.html</link>
            <guid>http://rz.scale-it.pl/2013/04/30/which_technology_for_realtime_communicaton_for_a_web_app_.html</guid>
            <title><![CDATA[Which technology for realtime communication for a web app?]]></title>
            <description><![CDATA[<div class="section" id="which-technology-for-realtime-communication-for-a-web-app">
<h1>Which technology for realtime communication for a web app?</h1>
<p>Web is the main medium to share information and access data on internet. It is usually tight to browser - proxies/routers - <em>web</em> server. The main protocol is <em>HTTP</em> and most of the internet services are HTTP oriented.</p>
<p>HTTP at the beginning was only about one site communication: client makes a request to server and server prepares response. Now web is more then simple request response. It’s a medium for application. And applications often require more then a single site communication.</p>
<p><em>push notifications</em> - often denoted as a mechanism which allow server to sent requests / events to a client.</p>
<p>There are a lot of solution to integrate HTTP with bi-directional communication, to implement <em>push notifications</em> for a web server.</p>
<p>Instead of describing available solutions, I will point to some resources, which did it:</p>
<ul class="simple">
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Push_technology">Push technology</a> - Wikipedia article, quiet technical.</li>
<li><a class="reference external" href="http://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet">What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet?</a>  - clean overview of <em>push</em> technologies, TLDR for those who don’t want read Wikipedia article.</li>
<li><a class="reference external" href="http://www.html5rocks.com/en/tutorials/eventsource/basics">Stream Updates with Server-Sent Events</a> - a great overview for Server-Sent Event Technology.</li>
</ul>
<p>A lot of programmers make a question:</p>
<ul class="simple">
<li>Which realtime technology should I use for realtime communication?</li>
<li>What to use for <em>push notifications</em></li>
<li>WebSockets vs Server-Sent Event vs Comet</li>
<li>Socket.IO vs SockJS or pure WebSockets?</li>
</ul>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/WebSocket">WebSockets</a> is probably one of the best solution. It provides fast and secure bidirectional connection. All we need in terms of functionality. But it has some drawbacks:</p>
<ul class="simple">
<li>Hard to implement.</li>
<li>Evolving standard. Not all client libraries are compatible with the newest one.</li>
<li>It’s not HTTP. It resembles only at the beginning - on handshake. Then it updates to <cite>WebSockets</cite> protocol. This mean that it can make a problems on some HTTP based infrastructures (proxy servers, firewalls, ...).</li>
<li>Lacks automatic reconnection.</li>
</ul>
<p>You can also look at SockJS or Socket.IO, which abstracts from the underground transport layer and provide you good, <em>WebSockets</em> like API for your realtime communication. This is especially useful when you need to support different clients (mobiles, desktop browsers...).</p>
<p>The problem with Socket.IO is that it is equated to it’s Node.js implementation on a web server. Other implementations are quiet behind and has some potential problems with new library versions.</p>
<p>SockJS has better interoperability and parallel supports other implementations on web servers.</p>
<div class="section" id="server-sent-events">
<h2>Server-Sent Events</h2>
<p>Finally if your client requirements are not so big (IE 8+, Firefox 6+, Chrome 6+, Safari 5+, Opera 11+ is enough) you <em>should</em> look at <a class="reference external" href="https://en.wikipedia.org/wiki/Server-sent_events">Server-Sent Events</a></p>
<p>SSE is a regular HTTP and uses single long streaming connection. It has lot of advantages:</p>
<ul class="simple">
<li>Transported over regular HTTP instead of a custom protocol (using HTTP streaming) - you don’t need special server implementation!</li>
<li>It’s much simpler to implement and debug. Protocol is dead simple and it’s all text. You don’t need huge server-side library or 3rd party service, You can just print the lines yourself.</li>
<li>Fast and secure. Even faster to initiate then WebSockets. Also the protocol has less overhead (messages are not divided into frames/packets).</li>
<li>Doesn’t require any tricks or reconnects you can find in <a class="reference external" href="http://en.wikipedia.org/wiki/Comet_%28programming%29">Comet</a> implementations.</li>
<li>Built in support for automatic re-connection and event-id.</li>
<li>It can switch between permanent connection and polling at any time, so you can change strategy depending on your server load (e.g. if you run into connection limit, just drop some clients, they’ll reconnect in couple of seconds).</li>
</ul>
<p>All you need is a client with a good HTTP support. If your browser doesn’t provide Server-Sent Events API (EventSource) you can easily <a class="reference external" href="https://github.com/Yaffle/EventSource">polyfill</a> it.</p>
<p>The only drawback is that SSE connections are simplex - only capable to send data (events) from Server. For most of the use cases it is not a problem. You can use HTTP XHR requests and stay with your HTTP web application server! It performs really good for most scenarios.</p>
<div class="section" id="when-sse-is-not-good-enough">
<h3>When SSE is not good enough?</h3>
<p>Good answer for this question comes from <a class="reference external" href="http://www.html5rocks.com/tutorials/eventsource/basics">HTML5Rocks</a> article:</p>
<blockquote>
<div>One reason SSEs have been kept in the shadow is because later APIs like WebSockets provide a richer protocol to perform bi-directional, full-duplex communication. Having a two-way channel is more attractive for things like games, messaging apps, and for cases where you need near real-time updates in both directions. However, in some scenarios data doesn’t need to be sent from the client. You simply need updates from some server action. A few examples would be friends’ status updates, stock tickers, news feeds, or other automated data push mechanisms (e.g. updating a client-side Web SQL Database or IndexedDB object store). If you’ll need to send data to a server, XMLHttpRequest is always a friend.</div></blockquote>
<p>That means we can go rid of realtime framework and maintain additional services.  Just use Server-Sent Events!</p>
<hr class="docutils"/>
<p>In my <a class="reference external" href="http://www.agflow.com">new project</a> we moved from SockJS to Server-Sent Events. I’m extending <a class="reference external" href="http://golang.org">Go</a> Handlers to support SSE. It’s really easy.</p>
<p>Want to read more? Take <a class="reference external" href="http://html5doctor.com/server-sent-events">html5 Doctor</a> article.</p>
</div>
</div>
</div>]]></description>
             <pubDate>Tue, 30 Apr 2013 00:00:00 +0200</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/03/08/which_programming_language_should_you_use_for_a_web_backend.html</link>
            <guid>http://rz.scale-it.pl/2013/03/08/which_programming_language_should_you_use_for_a_web_backend.html</guid>
            <title><![CDATA[Which programming language you should use for a web backend]]></title>
            <description><![CDATA[<div class="section" id="which-programming-language-you-should-use-for-a-web-backend">
<h1>Which programming language you should use for a web backend</h1>
<p>Probably a lot of business clients are worried about technology stack they want to use for their IT web services.
Recently I was talking with some company about new project. They were concerned about technology they should use for their web startup.</p>
<p>It is a responsible decisions, and a lot of people have similar concerns. If you want to contract a serious project, you probably want to be aware about technology choice, you won’t end up in a dirty hole.</p>
<p>For a frontend you don’t have many options. You probably end up with W3C standards + JavaScript.
For a backend the things are different.</p>
<div class="section" id="requirements">
<h2>Requirements</h2>
<p>When choosing a programming language you should start with collecting requirements:</p>
<ul class="simple">
<li>How many users you want to handle (overall)?</li>
<li>How many users you want to handle per second?</li>
<li>Does your application needs to have real-time communication with a server?</li>
<li>Do you have third party libraries you want to use?</li>
</ul>
<p>More complicated jobs are done by separate workers.</p>
<p>Assuming you want to use stable environment, and don’t be limited by libraries support you will probably consider the most popular programming languages.
I will quickly discuss some of them.</p>
<div class="section" id="java">
<h3>Java</h3>
<p>Chosen by big players. It doesn’t mean that Java is the best one. Java was built around Enterprise model. At the beginning they planed to make business around it (the same .NET). It means that Java is:</p>
<ul class="simple">
<li>reliable,</li>
<li>expensive. The costs come with overcomplicated solutions.</li>
</ul>
<p>But it also means that they are overestimated. Just check how popular web framework are going. Which startup is using Enteprise now? It’s complicated. Sprigs goes towards Rails model now (and still doesn’t have WebSockets support). Leading companies, which want to have Java stack, prefer new fresh solutions (Play, Scala etc...) - LinkedIn, Xerox. Google have their own solutions. Oracle? They took open MySQL and almost close it. Just look how they did with 5.6 release.</p>
</div>
<div class="section" id="python-ruby">
<h3>Python / Ruby</h3>
<p>Very fast developing and prototyping. Enjoy when coding, easy to maintain and refactor. Most of the web is driven by Python / Ruby / PHP frameworks (I don’t want to talk about the last one). Those languages are built by professional geeks.</p>
<p>Disadvantage: not as fast as Java. But for serving web content it is fast enough.
Because there are implementations with JIT (eg PyPy, Numba for Python), this disadvantage is going to be even weaker. JIT gives a huge boost.</p>
<p>Others also can argue that dynamic type languages (like Python, Ruby) are error prone. Static types allows you to find bugs earlier, but only some of them. If want to rely on static type checking, then I feel sorry for your applications and developers. All in all you need to have tests that cover all functions. Those tests, by the way, make validations about arguments (types) you pass to functions. On the other hand Java type hierarchy slows your development and makes refactoring hard.</p>
</div>
<div class="section" id="node-js">
<h3>Node.js</h3>
<p>Like the previous one. Brings performance rather then reliability.</p>
</div>
<div class="section" id="id1">
<h3><a class="reference external" href="http://golang.org">Go</a></h3>
<p>The newcomer. Takes the best from Java (fast) and Python / Ruby (fun, productive). Have simple yet powerful type hierarchy. Disadvantages: although the project is stable, there are not a lot of tools around it. Some which exists are not as rich / mature as the ones we have in previous technologies.</p>
<p>Nonetheless Go is already used in production (Google, Heroku). It proves its usability and productivity as a general programming language: <a class="reference external" href="http://www.youtube.com/watch?v=kKQLhGZVN4A">http://www.youtube.com/watch?v=kKQLhGZVN4A</a> . The teams, which give Go a chance are happy for this decisions.</p>
</div>
</div>
<div class="section" id="which-one-to-choose">
<h2>Which one to choose?</h2>
<p>Long story short: <strong>choose the one for which you have proficient developers</strong>. Really!</p>
<p>Web backend doesn’t require so much complicated tools (those are done through separate workers, if not then it means your app is unsafe and aware of critical bugs, data crash etc...).</p>
</div>
<div class="section" id="which-i-m-choosing">
<h2>Which I’m choosing?</h2>
<p>If I need to make a choice I will choose Go or Python. Go has a great network and concurrency support. Actually I’m developing <a class="reference external" href="https://github.com/scale-it/surfer">surfer</a> - new web framework in Go programming language. I just don’t like Java. Even Scala - it’s hard to find specialists and is over-complicated (thought once I was <a class="reference external" href="/docs/scala.html">fascinated</a> about it). Just compare the results:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.google.com/search?q=why+I+don't+like+java&amp;ie=utf-8">why I don’t like Java</a> google query. The second position from <em>Ask Hacker News</em> is quiet interesting: <a class="reference external" href="http://news.ycombinator.com/item?id=4406224">http://news.ycombinator.com/item?id=4406224</a> . Please, read the first (most scored) response - by <em>strlen</em></li>
<li><a class="reference external" href="https://www.google.com/search?q=why+I+don't+like+python&amp;ie=utf-8">why I don’t like Python</a>  google query. Surprisingly we have analogous <em>Ask Hacker News</em>:  <a class="reference external" href="http://news.ycombinator.com/item?id=1463425">http://news.ycombinator.com/item?id=1463425</a> - again the first (most scored) response by <em>gte910h</em> makes my point.</li>
</ul>
<p>Believe me I haven’t read those post before. I’ve just wanted to prove that other geeks share similar opinion. And I was positively surprised.</p>
</div>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Fri, 08 Mar 2013 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/03/04/emacs_on_fly_syntax_checking_for_go_programming_language.html</link>
            <guid>http://rz.scale-it.pl/2013/03/04/emacs_on_fly_syntax_checking_for_go_programming_language.html</guid>
            <title><![CDATA[Emacs on fly syntax checking for Go programming language]]></title>
            <description><![CDATA[<div class="section" id="emacs-on-fly-syntax-checking-for-go-programming-language">
<h1>Emacs on fly syntax checking for Go programming language</h1>
<p>Emacs is a great, flexible editor. <a class="reference external" href="http://golang.org">Go</a> is quiet new powerful programming language.
There are a lot of blog posts about pros of both Emacs and Go.</p>
<p>Out of the box, configured Emacs looks like text editor for geeks. To make it more useful you need to spent a little of time and turn on some functions. One of the most desirable features for programmers is syntax checking, so the programmer don’t need to make to much edit-save-compile cycles.</p>
<p>Standard Emacs has Flymake built in package. But it is not fashionable. It’s generic and useful, but it’s configuration is awkward. To add syntax checking for buffers (emacs name for a file content) you need to write fight with Elisp (the script language in which Emacs is written).</p>
<p>But there is also Flycheck - new package which supersede Flymake. <em>Essentially it’s “flymake done right”</em>.
If you are not familiar with it, I encourage you to read more on <a class="reference external" href="https://github.com/lunaryorn/flycheck">Flycheck project site</a> and use it. Flycheck requires Emacs &gt;= 24.</p>
<p>Back to the topic. Adding on fly syntaxt checking for Go programming language is relatively simple.
Presented solutions are pure syntax checkers. They don’t compile or make cross modules checking.</p>
<div class="section" id="using-flycheck">
<h2>Using Flycheck</h2>
<p>Flycheck makes it simple - you need to declare new checker and add it to checkers list. The <em>checker declaration</em> is described in the source of Flycheck:
<span class="docutils literal"><span class="pre">checker_symbol_name</span> <span class="pre">doc_string</span> <span class="pre">properties</span></span>. Properties is a sequence of <span class="docutils literal"><span class="pre">:property</span> <span class="pre">value</span></span> pairs.</p>
<p>The declaration should be in <span class="docutils literal"><span class="pre">eval-after-load</span></span> statement, to execute it only when it’s needed - when editing go files. Below is the final code, you need to add to your <em>.emacs</em> file:</p>
<div class="highlight-cl"><div class="highlight"><pre><span class="p">(</span><span class="nv">eval-after-load</span> <span class="s">&quot;go-mode&quot;</span>
  <span class="o">'</span><span class="p">(</span><span class="k">progn</span>
     <span class="p">(</span><span class="nv">flycheck-declare-checker</span> <span class="nv">go-gofmt</span>
       <span class="s">&quot;A Go syntax and style checker using the gofmt utility.&quot;</span>
       <span class="ss">:command</span> <span class="o">'</span><span class="p">(</span><span class="s">&quot;gofmt&quot;</span> <span class="nv">source-inplace</span><span class="p">)</span>
       <span class="ss">:error-patterns</span> <span class="o">'</span><span class="p">((</span><span class="s">&quot;^\\(?1:.*\\):\\(?2:[0-9]+\\):\\(?3:[0-9]+\\): \\(?4:.*\\)$&quot;</span> <span class="nb">error</span><span class="p">))</span>
       <span class="ss">:modes</span> <span class="ss">'go-mode</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">'flycheck-checkers</span> <span class="ss">'go-gofmt</span><span class="p">)))</span>
</pre></div>
</div>
<p>And activate Flycheck by either by manually or with hook for <em>go-mode</em>:</p>
<div class="highlight-cl"><div class="highlight"><pre><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'go-mode-hook</span> <span class="ss">'flycheck-mode</span><span class="p">)</span>
</pre></div>
</div>
<p>I will try make push-request to add the code for Flycheck package, so you will not need absolutely nothing when using Flycheck.</p>
<div class="section" id="update">
<h3>Update</h3>
<p>The pull request was accepted. Now you can update your package (either through <a class="reference external" href="http://melpa.milkbox.net">Melpa</a> package repository, or <a class="reference external" href="https://github.com/lunaryorn/flycheck">Flycheck project site</a> project site) and add a hook for go-mode:</p>
</div>
</div>
<div class="section" id="using-flymake">
<h2>Using Flymake</h2>
<p>If you are forced to use Emacs &lt; 24, or don’t want to use Flycheck then I prepared package for Flymake - <em>flymake-go</em>.
It is <em>package.el</em> compatible and distributed by <em>MELPA</em></p>
<p>The instruction is available on <a class="reference external" href="https://github.com/robert-zaremba/flymake-go">flymake-go site</a>.</p>
<p>With this package it is super easy.</p>
<div class="section" id="goflymake">
<h3>goflymake</h3>
<p>There is also <a class="reference external" href="https://github.com/dougm/goflymake">goflymake</a> which is more then syntax checking. It uses <em>go build</em> tool to perform checking, so it covers also additional type and cross modules checking. But it requires additional wrapper around <em>go</em> command. More about it on link above.</p>
</div>
</div>
</div>]]></description>
            <category><![CDATA[ programming ]]></category>
             <pubDate>Mon, 04 Mar 2013 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/02/18/wikipedia_processing._PyPy_vs_CPython_benchmark.html</link>
            <guid>http://rz.scale-it.pl/2013/02/18/wikipedia_processing._PyPy_vs_CPython_benchmark.html</guid>
            <title><![CDATA[Wikipedia processing. PyPy vs CPython benchmark]]></title>
            <description><![CDATA[<div class="section" id="wikipedia-processing-pypy-vs-cpython-benchmark">
<h1>Wikipedia processing. PyPy vs CPython benchmark</h1>
<p>Lately I’ve done some data mining tasks on Wikipedia. It consist of:</p>
<ul class="simple">
<li>processing enwiki-pages-articles.xml Wikipedia dump</li>
<li>storing pages and categories into mongodb</li>
<li>using redis for mapping category titles</li>
</ul>
<p>I made a benchmark on a real tasks for CPython 2.7.3 and PyPy 2b. Libraries I used:</p>
<ul class="simple">
<li>redis 2.7.2</li>
<li>pymongo 2.4.2</li>
</ul>
<p>Furthermore CPython was supported by:</p>
<ul class="simple">
<li>hiredis</li>
<li>pymongo c-extensions</li>
</ul>
<p>The benchmark mostly involve databases processing so I fought I won’t have huge PyPy benefit (since CPython drivers are supported by <em>C-extensions</em>).</p>
<p>Below I will describe some interesting results</p>
<div class="section" id="extracting-pagenames">
<h2>Extracting pagenames</h2>
<p>I needed to make <a class="reference external" href="http://en.wikipedia.org/wiki/Wikipedia:Page_name">pagenames</a> to <span class="docutils literal"><span class="pre">page.id</span></span> mapping of all categories from Wikipedia and store them in redis. The simplest solution would be to import <em>enwiki-page.sql</em> (which defines a RDB table) into MySQL and then transport them to redis. But I didn’t want to add MySQL requirements so I wrote a simple SQL <em>insert expression</em> parser in pure Python and directly import data from <em>enwiki-page.sql</em> to redis.</p>
<p>This task is more CPU hungry so we expect PyPy gain.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%"/>
<col width="84%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">/</th>
<th class="head">time</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PyPy</td>
<td>169.00s user   8.52s system 90% cpu</td>
</tr>
<tr class="row-odd"><td>CPython</td>
<td>1287.13s user   8.10s system 96% cpu</td>
</tr>
</tbody>
</table>
<p>I also made similar mapping for <span class="docutils literal"><span class="pre">page.id</span> <span class="pre">-&gt;</span> <span class="pre">categories</span></span> using <em>enwiki-categorylinks.sql</em> in Mongodb (the capacity of RAM on my laptop is too small to hold informations I need).</p>
</div>
<div class="section" id="filtering-categories-from-enwiki-xml">
<h2>Filtering categories from enwiki.xml</h2>
<p>To facilitate work with categories I needed to filter categories from <em>enwiki-pages-articles.xml</em> and store them back with the same xml format.
For this task I used SAX parser, which in both PyPy and CPython is a wrapper around <span class="docutils literal"><span class="pre">expat</span></span> parser. <span class="docutils literal"><span class="pre">expat</span></span> is native complied package (in both PyPy and CPython).</p>
<p>The code is quiet simple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">WikiCategoryHandler</span><span class="p">(</span><span class="n">handler</span><span class="o">.</span><span class="n">ContentHandler</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class which detecs category pages and stores them separately</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ignored</span> <span class="o">=</span> <span class="nb">set</span><span class="p">((</span><span class="s">'contributor'</span><span class="p">,</span> <span class="s">'comment'</span><span class="p">,</span> <span class="s">'meta'</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f_out</span><span class="p">):</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">ContentHandler</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f_out</span> <span class="o">=</span> <span class="n">f_out</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_page</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_tag</span> <span class="o">=</span> <span class="s">''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s">'root'</span><span class="p">,</span> <span class="p">{})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skip</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">startElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ignored</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skip</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_tag</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">'page'</span><span class="p">:</span>
            <span class="n">elem</span><span class="o">.</span><span class="n">ns</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curr_page</span> <span class="o">=</span> <span class="n">elem</span>
        <span class="k">else</span><span class="p">:</span>   <span class="c"># we don't want to keep old pages in memory</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span> <span class="o">=</span> <span class="n">elem</span>

    <span class="k">def</span> <span class="nf">endElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skip</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">'page'</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curr_page</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">top</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curr_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span><span class="o">.</span><span class="n">tag</span>

    <span class="k">def</span> <span class="nf">characters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">content</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span> <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">skip</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curr_elem</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TextElement</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_tag</span> <span class="o">==</span> <span class="s">'ns'</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">curr_page</span><span class="o">.</span><span class="n">ns</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">startDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;root&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">endDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;&lt;</span><span class="se">\r</span><span class="s">oot&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;FINISH PROCESSING WIKIPEDIA&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">curr_page</span><span class="o">.</span><span class="n">ns</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">curr_page</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">attrs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">childrens</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">childrens</span><span class="o">.</span><span class="n">append</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;Element {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">childrens</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">u&quot;{0}&lt;{1}{2} /&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s">&quot; &quot;</span><span class="o">*</span><span class="n">margin</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span>
                <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">' {}=&quot;{}&quot;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="p">{}</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()]))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">childrens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">TextElement</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">childrens</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">u&quot;{0}&lt;{1}{2}&gt;{3}&lt;/{1}&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s">&quot; &quot;</span><span class="o">*</span><span class="n">margin</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span>
                <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">u' {}=&quot;{}&quot;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="p">{}</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()]),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">childrens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>

        <span class="k">return</span> <span class="s">u&quot;{0}&lt;{1}{2}&gt;</span><span class="se">\n</span><span class="s">{3}</span><span class="se">\n</span><span class="s">{0}&lt;/{1}&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s">&quot; &quot;</span><span class="o">*</span><span class="n">margin</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span>
            <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">u' {}=&quot;{}&quot;'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="p">{}</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()]),</span>
            <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">c</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">margin</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">childrens</span><span class="p">)))</span>

<span class="k">class</span> <span class="nc">TextElement</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">content</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;TextElement&quot;</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">content</span>
</pre></div>
</div>
<p>The <span class="docutils literal"><span class="pre">Element</span></span> and <span class="docutils literal"><span class="pre">TextElement</span></span> objects holds information about element tag and body, and provides a method to render it.</p>
<p>Here I expect similar result for both PyPy and CPython.</p>
<table border="1" class="docutils">
<colgroup>
<col width="47%"/>
<col width="53%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">/</th>
<th class="head">time</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PyPy</td>
<td>2169.90s</td>
</tr>
<tr class="row-odd"><td>CPython</td>
<td>4494.69s</td>
</tr>
</tbody>
</table>
<p>I’m positively surprised with PyPy result.</p>
</div>
<div class="section" id="computing-interesting-categories-set">
<h2>Computing interesting categories set</h2>
<p>I wanted to compute a interesting categories set - which, in my use case, consist of categories derived from <em>Computing</em> category.
For this I needed to construct a category graph which will provide <em>category - sub categories</em> relation.</p>
<div class="section" id="construction-category-sub-categories-relation">
<h3>Construction category - sub categories relation</h3>
<p>This task uses data from mongodb and redis constructed before. The algorithms is:</p>
<div class="highlight-python"><div class="highlight"><pre>for each category.id in redis_categories (it holds *category.id -&gt; category title mapping*) do:
    title = redis_categories.get(category.id)
    parent_categories = mongodb get categories for title
    for each parent_cat in parent categories do:
        redis_tree.sadd(parent_cat, title) # add to parent_cat set title
</pre></div>
</div>
<p>Sorry for this pseudo code, but I think it looks more compact.</p>
<p>So this task is just copying data between databases. The result here are made after mongodb warming up (without it the results are biased because mongodb latency - the python job uses only 10% CPU) The timing is:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%"/>
<col width="83%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">/</th>
<th class="head">time</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PyPy</td>
<td>175.11s user 66.11s system 64% cpu</td>
</tr>
<tr class="row-odd"><td>CPython</td>
<td>457.92s user 72.86s system 81% cpu</td>
</tr>
</tbody>
</table>
<p>Another points to PyPy.</p>
</div>
<div class="section" id="traversing-redis-tree">
<h3>Traversing redis_tree</h3>
<p>If we have <span class="docutils literal"><span class="pre">redis_tree</span></span> database, then only thing left is to traverse all nodes which are achievable from <em>Computing</em> category.
To preserve falling into cycle we need to remember which categories we visited. Since I want to test Python for database tasks I used redis set field for this.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%"/>
<col width="87%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">/</th>
<th class="head">time</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PyPy</td>
<td>14.79s user  6.22s system 69% cpu 30.322 total</td>
</tr>
<tr class="row-odd"><td>CPython</td>
<td>44.20s user 13.86s system 71% cpu 1:20.91 total</td>
</tr>
</tbody>
</table>
<p>To be honest this task also requires constructing some <em>tabu list</em> - to prevent jumping into unwanted categories. But this is not a point of this article.</p>
</div>
</div>
<div class="section" id="conclusions">
<h2>Conclusions</h2>
<p>Presented tasks are only introduction for my final work. It requires a knowledge base which I got by extracting appropriate articles from Wikipedia.</p>
<p>PyPy gives me 2-3 times performance boost compared to CPython for simple data bases operations (I’m not counting sql parser here, which is almost 8x).</p>
<p>Thanks PyPy my work was more pleasant - I got Python productivity without frustrating with waiting for results to correct my algorithms. Moreover PyPy doesn’t kill my CPU as CPython does so in a meantime I could normally use my laptop (check % CPU time usage).</p>
<p>The tasks was mostly database manipulation, and CPython has some speed-up from developers contribute into dirty <em>C-extensions</em>. PyPy doesn’t use them and at the end is faster!</p>
<p>All my work required a lot of cycles so I’m really happy with PyPy.</p>
</div>
</div>]]></description>
            <category><![CDATA[ programming ]]></category>
             <pubDate>Mon, 18 Feb 2013 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/01/25/tornado___the_best_web_framework.html</link>
            <guid>http://rz.scale-it.pl/2013/01/25/tornado___the_best_web_framework.html</guid>
            <title><![CDATA[Tornado - the best Python web framework]]></title>
            <description><![CDATA[<div class="section" id="tornado-the-best-python-web-framework">
<h1>Tornado - the best Python web framework</h1>
<p>Today web frameworks mostly utilize HTTP requests, usually delivering MVC stack. But web frameworks should do different (because of the <em>web</em>!). <br/>
Now web consists mostly of patterns around HTTP protocol (HTTP itself, RESTful, HTTP API ...). Moreover we have bidirectional communication, <em>long requests</em>, high traffic etc... <br/>
The ideal framework must:</p>
<ul class="simple">
<li>have generic methods, network libraries and asynchronous support to handle previously mentioned stuff.</li>
<li>be extensible for new web (web2.0, web3.0 ...)</li>
<li>be aware of Python WSGI standard</li>
<li>have features to easily develop www platforms</li>
<li>have good documentation and community</li>
</ul>
<p>It’s not the aim of every web framework to provide an MVC stack. Although, there should be a simple way to apply it using available solutions.</p>
<p>In this post I will try to explain why I consider WSGI insufficient and present <em>Tornado</em>, which handles <em>the ideal web framework</em> problems well.</p>
<div class="section" id="wsgi-vs-tornado-application-and-websockets">
<h2>WSGI vs Tornado application and WebSockets</h2>
<p>The standard Tornado application (<span class="docutils literal"><span class="pre">tornado.web.Application</span></span>) is not WSGI. <br/>
It is designed as a lightweight application for Tornado HTTP server.</p>
<p><a class="reference external" href="http://www.python.org/dev/peps/pep-3333">WSGI</a> is a standard interface for python web applications. It defines how to handle HTTP requests and making responses in a simple way abstracted from HTTP protocol. But it has some drawbacks. At first it looks cool, and simple then handling HTTP directly. Request parsing is abstracted. WSGI provides a way to write heads and provide a response body. The design allows you to make middlewares, which is a really cool idea. All of this looks nice. <br/>
But the devil is in the details. WSGI doesn’t work with the <em>Upgrade</em> header or other interesting features of HTTP.
Some examples of WSGI flaws:</p>
<ul class="simple">
<li>There was an important, long-standing Unicode support issue which was resolved by final WSGI spec (PEP 3333) which was accepted in 2011! (too late!). The PEP only fixed this one problem.</li>
<li><em>Apps and middleware must not apply any kind of Transfer-Encoding to their output</em> (from <a class="reference external" href="http://www.python.org/dev/peps/pep-3333/tornado___the_best_web_framework.html#handling-the-content-length-header">wsgi spec</a>). So applications and frameworks cannot gzip responses. According to WSGI, this task should be done by the HTTP server. But it doesn’t have information which output is eligible to compress and which is not (it can compress all responses or none). All major frameworks (Django, Pyramid...) breaks this rule.</li>
<li><em>Chunked encoding</em> must be handled by the server. If you want to stick to standards, then you have a problem with long polling implementations - which will depend on server configuration / implementation. Server has no information about authors application details.</li>
<li>Each WSGI middleware has to parse parse environment variables independently (consuming extra CPU time).</li>
<li>WSGI is designed in the spirit of old CGI: a low-level interface always hidden by the frameworks</li>
<li>there is no official API for WSGI. We have only server - middlewares - application. The only thing we can do is to change order of middlewares. But they are also limited (we can’t use middleware <em>X</em> before <em>Y</em> in both request and response path). There is no standard way to customize middlewares from application.</li>
<li>middlewares and application only share <em>environment</em>. Let’s hope non middleware will not mess with each other’s values. Just check dirty implementations of <em>WebSockets</em> around WSGI stack.</li>
</ul>
<p>Those problems simply don’t exist in Tornado.
The good thing about WSGI is that it is a standard, allowing WSGI applications to be handled in a uniform manner.</p>
<p><a class="reference external" href="http://dev.w3.org/html5/websockets">WebSockets</a>  (great <a class="reference external" href="http://buildnewgames.com/websockets">guide</a>) protocol is going to replace AJAX-based realtime communication. Thanks to WebSockets we get seamless bidirectional communication with a server - so we can easily synchronize objects on user side, implement push notifications and so on.
WebSockets doesn’t have a synchronous request-response pattern. It is designed upon existing HTTP infrastructure but only resembles HTTP at the beginning - the handshake is HTTP, after that the protocol is non-blocking message-passing preserving the same connection. In other words, it upgrades from HTTP to TCP or UDP. WebSockets is only concerned with connections to a browser. So don’t assume it is the ideal communication layer for everything. <br/>
Many concerns have been discussed about this design. The main adventage is to use the same infrastructure as www does (server, 80/443 port). The design of WebSockets is not a subject of this post.</p>
<p>Unfortunately WebSockets doesn’t go well with WSGI applications.
The problem is with WSGI itself. WSGI is stateless and is designed for the following process: make request -&gt; handle request -&gt; prepare headers -&gt; make response -&gt; finish request. The result is that WSGI does not support non-blocking requests. However there are WSGI - WebSockets tandem implementations for common WSGI web frameworks which require an additional async event framework (<a class="reference external" href="http://blog.eventlet.net/tag/wsgi-websocket-standard">example</a>). But they look like makeshift solutions.</p>
<p>Programmers usually end up writing two web server applications: one for WebSockets and other for WSGI.</p>
<p>Tornado web applications are not WSGI applications. From the beginning they are designed to work with an event loop. So with Tornado you can mix all web smoothly (www server, WebSockets...)</p>
<p>Because frequent changes in the WebSockets standard there is advised to separate them from your www applications. But with Tornado you can use the same code.</p>
<div class="section" id="websockets-is-not-everything">
<h3>WebSockets is not everything</h3>
<p>WebSockets is not everything. Your web framework needs to easily integrate with other protocols (like <a class="reference external" href="http://en.wikipedia.org/wiki/Server-sent_events">Server-sent events</a>, tornado <a class="reference external" href="https://github.com/guyzmo/event-source-library">implementation</a>), SocketIO and HTTP upgrades. These last are becoming popular for <em>presence services</em>. Tornado does that (read below sections).</p>
</div>
<div class="section" id="tornado-for-wsgi">
<h3>Tornado for WSGI</h3>
<p>If you have a WSGI application and you want to use Tornado, or you have Tornado application and you want to deploy it as WSGI one, there is nothing to stop you.
Tornado provides wrapper for both.</p>
<p>If you want to transform your Tornado app, just use <span class="docutils literal"><span class="pre">tornado.wsgi.WSGIApplication</span></span>, and you will get a lightweight WSGI application which you can deploy on <em>uwsgi</em>, <em>mod_wsgi</em> and others. The only limitation is you can’t use any asynchronous/non-blocking features of Tornado (for reasons given in the previous section).</p>
<p>On the other hand, if you already have a WSGI app and want to run it on a blazing fast <span class="docutils literal"><span class="pre">tornado.httpserver.HTTPServer</span></span>, wraps it with <span class="docutils literal"><span class="pre">tornado.wsgi.WSGIContainer</span></span>. <br/>
But you need to be careful. Since your original application is not prepared for an asynchronous server, and will make a lot of IO/computation, it will block other requests while generating a response (further requests will be accepted and buffered but queued for later handling).</p>
</div>
<div class="section" id="tornado-for-www-frameworks">
<h3>Tornado for www frameworks</h3>
<p>Most other web frameworks try to deliver one stack for developing web sites, leaving network libraries. Now, in the web 2.0 (web 3.0?) era we concern more about network on the server side instead of ORM, template language (which should be chosen by the application needs).</p>
<ul class="simple">
<li>Django is a heavy framework which prescribes a design for you application. You’ve got the Django ORM, a build-in template engine, enforced application desing, form generators and so on. All of this works well if you work with an RDBMS and 12-years-old web pages design. Now we have RDBMS, NoSQL DB, client side frameworks, RESTful APIs. If you want to use this in the Django way it could start to get messy. But we have a lot of Django legacy code. So for simple web portals, maybe it’s still a good idea.</li>
<li><em>micro www frameworks</em>: Flask, Bottle.  WSGI wrappers + routing. Great for simple REST wsgi apps!</li>
<li>Pyramid - highly customized, feature-full framework. Great if you want more features than Bottle or Flask can give you (or you prefer working with Flask extensions)</li>
</ul>
<p>Tornado, on the other hand, gives you highly customized application model with a great network library.
Tornado is also feature-full framework. It is easier to extend then using Pyramid or Flask, has more features then <em>www microframeworks</em>. But it doesn’t have such a big library support for web portals as Django / Pyramid has (eg: ready to go comment, blog modules ...) and you need to write slightly more code for small task then with <em>www microframeworks</em>. Someone can argue that using Django/Flask... is easier to write apps because there are no callback style. But in Tornado callback style is an option - you can use generators to code in synchronous style (below more about it). But this is an option! you  don’t have to use any asynchronous functions in you handlers! You can use it and benefit, or you can live without them.</p>
<p>So you are not tied to WSGI, nor do you have to do everything yourself. Tornado is already used in big production stories (both for API server and html content):</p>
<ul class="simple">
<li><a class="reference external" href="http://friendfeed.com">http://friendfeed.com/</a></li>
<li><a class="reference external" href="http://bit.ly">http://bit.ly</a></li>
<li><a class="reference external" href="http://quora.com">http://quora.com</a></li>
<li><a class="reference external" href="http://tornado.poweredsites.org">others</a></li>
</ul>
<p>As noticed, <strong>Tornado has a great ecosystem with a lot of libraries and drivers</strong> which utilises asynchronous connections. Find a not-exhaustive list of them on on <a class="reference external" href="https://github.com/facebook/tornado/wiki/Links">https://github.com/facebook/tornado/wiki/Links</a></p>
</div>
</div>
<div class="section" id="asynchronous-framework">
<h2>Asynchronous framework</h2>
<p>Thanks to its speed and simplicity, Tornado has become very popular among Python’s asynchronous libraries.</p>
<p>There is also a PyCon talk which superbly presents Tornado: <a class="reference external" href="http://www.pyvideo.org/video/720/more-than-just-a-pretty-web-framework-the-tornad">http://www.pyvideo.org/video/720/more-than-just-a-pretty-web-framework-the-tornad</a>  (there is also a funny story about the Twisted and and Tornado devs in the second half of the video). <br/>
The main points are:</p>
<ul class="simple">
<li>beautiful, clean code</li>
<li>simple, easy (in contrast to other callback frameworks) yet powerful. <br/>
To provide synchronous style for it’s callbacks, Tornado uses generators and Futures object (since Tornado 3) - similar to the <span class="docutils literal"><span class="pre">concurrent.futures</span></span> form Python3, but not tied to threads . For Python2 it provides own restricted implementation of Futures. Take a look into <a class="reference external" href="http://www.slideshare.net/emptysquare/nyc-python-meetup-coroutines-2013-0416">Python Coroutines, Present and Future</a> presentation to get an idea about it, it’s really awesome!</li>
<li>great libraries support (increased by Twisted’s legacy protocols thanks <span class="docutils literal"><span class="pre">tornado.platform.twisted</span></span>)</li>
<li>integrates SSL</li>
<li>integrates in www/HTTP infrastructure and beyond that.</li>
<li>pure Python. Works with <strong>PyPy</strong></li>
<li>Performance. Serving network performance is similar to <em>gevent</em> one, but under PyPy it’s far better! Check <a class="reference external" href="http://casbon.me/what-will-pypy-do-for-your-website-benchmarki">Benchmarking python web servers on pypy and cpython</a> and <a class="reference external" href="http://blog.kgriffs.com/2012/10/23/python-vs-node-vs-pypy.html">Python vs. Node vs. PyPy</a></li>
</ul>
<p>If you don’t like callback style, you can use <span class="docutils literal"><span class="pre">tornado.gen</span></span> which takes you back to synchronous style (preserving non blocking).
Moreover if you are happy with Tornado stack, but want to use green version of std lib from eventlet, or just monkey patch from <em>eventlet</em> and transform blocking libraries into non blocking ones (if the IO blocking operations relays only on python std lib) then try <a class="reference external" href="https://github.com/vishnevskiy/greentornado">greentornado</a> . It really works!</p>
<p>Interestingly, the creators of Tornado suggest using blocking libraries for really short operations (eg: DB operations), and running more application instances then CPU cores - to handle those short breaks. If operations, which are suppose to be really short (DB) turns out to be long then consider latency problem inside your application, wrong architectural design or your application really requires this so you have to use drivers based on Tornado for those operations.</p>
<p>Asynchronous frameworks are great if you need to handle enormous numbers of connections or work with IO blocking / distributed task. And Tornado helps to make it easy and reliable.</p>
<p>There are many other Python asynchronous libraries. I will try to explain my opinion of why Tornado is better.</p>
<div class="section" id="twisted">
<h3>Twisted</h3>
<p>It is very similar with Tornado in design concept. Both use mainly callback style and have builtin, pure-Python event loops powered by <em>epool</em> (on Unix).</p>
<p>Twisted, like the name indicates, is <em>twisted</em>. The big plus for Twisted is its variety of built-in protocols and web standards.
Although it’s complicated. You not only have callbacks, but also deferreds. If someone tries to say that defereds are not complicated, don’t belive him. It doesn’t seem I’m fool. The idea of deferreds is simple yet powerfull. But using it complicates the program structure. It doesn’t bring any simplicity at all. Neither is your programm shorter. Just the same way as <em>goto</em> in C. But when you use it, you will have a problem with testing and debugging. And when other programmers start reading your code, they will want to kill you.
Besides this, Twisted is overcomplicated in the way you can handle problem. Just try to make an client for echo server by your own. In python std lib is easier and cleaner.</p>
</div>
<div class="section" id="gevent">
<h3>Gevent</h3>
<p>A lot has been written about Gevent on the internet. The version with libevent is abandoned, and the new one (1.0) can’t get away from beta version for 3 years.
Ut’s tied to CPython implementation. You can’t use it with othe Python implementations (PyPy, Jython...).</p>
</div>
<div class="section" id="diesel">
<h3>Diesel</h3>
<p>I like it. The people who design Diesel are smart. The latest version is thier 3rd attempt to design a good asynchronous library. They started with generators-based idea (using yield for async calls) - like in <a class="reference external" href="http://asyncoro.sourceforge.net">asyncoro</a>. And they end up using greenlets. I played with all versions. And I can admit that the last one (it’s tidier then the second one) is really cool when you want to async applications and don’t want to play with callbacks.</p>
<p>Like in Tornado you get a bunch of tools and utils for IO programming. So you can abstract clunky socket and get a nice, awesome interface to network and asynchronous staff. As mentioned above, it uses greenlets which allows to programming asynchronously in a synchronous way. It works with PyPy. But PyPy can uses its JIT when operating on <em>greenlets/tasklets</em>. It’s going to change, but the progress is slow. I would like to see PyPy JIT support and community for Diesel.</p>
</div>
<div class="section" id="eventlet">
<h3>Eventlet</h3>
<p>We can think of this as a pure Python version of Gevent. It has Stackless support and works with PyPy (it is not stable but there are efforts to change that). What’s good is that it can successful monkey-patch the standard library to make standard IO asynchronous (like Gevent do).
Eventlet doesn’t have the fancy stuff that Diesel have, but it has a far better commercial (OpenStack) usage and recently active maintainers.</p>
<p>It was almost dead. One year ago the status was: <em>the API is stable, the founder said that features are all on, there were no active maintainer</em> (<a class="reference external" href="https://lists.secondlife.com/pipermail/eventletdev/2012-July/001066.html">https://lists.secondlife.com/pipermail/eventletdev/2012-July/001066.html</a>). But in the middle of 2012 they successfully revived the community, took a control on the package, pushed bug fixes and encouraged other to help. <br/>
Now the project is healthy. Maintainers put in a lot of effort to make improvements. <a class="reference external" href="https://lists.secondlife.com/pipermail/eventletdev/2012-December/001103.html">Read</a>  the summary of the current status and what have been done.</p>
<p>It doesn’t have Diesel’s interface, or Tornado’s community/ecosystem Tornado has. But there are players around who can change it. So it’s worth to keeping it in mind.</p>
</div>
<div class="section" id="id1">
<h3>Others</h3>
<p>There many others others. I only wanted to describe the representatives of different architecture ideas and direct competitors (Twisted).
All of syncless, asyncoro, whizzer ... easy fit in one of the above groups or have no support in community / libraries.</p>
<p><br/></p>
</div>
<div class="section" id="my-experience-in-web-field">
<h3>My experience in web field</h3>
<p>I worked with web projects using all of <em>web frameworks</em> mentioned above. The biggest were in Tornado, Django (including OpenStack), repoze.bfg (Pyramid), Bottle.</p>
</div>
</div>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Fri, 25 Jan 2013 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/01/19/new_years_homework_for_developers.html</link>
            <guid>http://rz.scale-it.pl/2013/01/19/new_years_homework_for_developers.html</guid>
            <title><![CDATA[New Years homework for developers]]></title>
            <description><![CDATA[<div class="section" id="new-years-homework-for-developers">
<h1>New Years homework for developers</h1>
<p>Are you using some OpenSource tools? Which one the most? Did they allow you to make money? How your life would look like if they didn’t exists?</p>
<p>Name them, type them! <br/>
<em>Linux, Python, PyPy, Firefox, vim, emacs, git, wine, ...</em> just to name few. There are systems, applications, languages. Some have big funding. Some even don’t have full time employee positions, are run by open contributors which spend their free time.</p>
<p>Do you want to say <em>thank you</em>?|br|
Most of them collects money (e.g. through <em>Software Freedom Conservancy</em>).</p>
<ol class="arabic simple">
<li>Choose the project which you like and which you think it needs your support. Go to their homepage and fine a way to donate. If don’t find, choose the other one, or go to some software foundation (<a class="reference external" href="&quot;http://www.fsf.org/&quot;">Free Software Foundation</a>, <a class="reference external" href="http://sfconservancy.org/members/current">Software Freedom Conservancy</a>).</li>
<li>Donate. It doesn’t need to be a lot of. Everything is counting. Everything is good to say “thank you”. It can be just 5$, which you could spend on a beer.</li>
<li><em>PrintScreen</em> you confirmation and share on the net, social ...</li>
</ol>
<img alt="/_static/images/donate_pypy2013.png" src="/_static/images/donate_pypy2013.png"/>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Sat, 19 Jan 2013 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2013/01/07/python___language_of_the_decade.html</link>
            <guid>http://rz.scale-it.pl/2013/01/07/python___language_of_the_decade.html</guid>
            <title><![CDATA[Python - language of the decade]]></title>
            <description><![CDATA[<div class="section" id="python-language-of-the-decade">
<h1>Python - language of the decade</h1>
<p>Recently I found a <a class="reference external" href="https://sites.google.com/site/pydatalog/pypl/PyPL-PopularitY-of-Programming-Language">PYPL</a> - PopularitY of Programming Language index. It rediscovers the indicator of programming language popularity. Author argue that TIOBE index can be hypocritical due to the ambiguity of programming languages name, and introduce other phrases to use in Google Trends.</p>
<p>Looking at the author study, we can deduce that Python has the biggest increase in the last decade. What’s better we can see good linear growth for 10 years! Greetings for Python!</p>
<img alt="/_static/images/programming_languages_popularity.png" src="/_static/images/programming_languages_popularity.png"/>
<p>The plot is interesting indeed, because constant line doesn’t mean bad. It’s mean that constantly some group of people (for Java and PHP - a large group) wants to learn this language.
Python is the only language which behaves different here.</p>
<p>As we known Python start from scripting and scientific fields, and now becomes increasingly popular, hitting the technologies which are dominated by web and business. Those technologies are supported by big companies (Java, C#, C++), which pay big money for support, and web (PHP, Ruby), which makes a lot of noise in the internet. It is very difficult to become popular in such big competition. And Python get it successively. For me this is the reason why <em>Python is the language of the decade.</em></p>
<div class="section" id="other-interesting-rankings">
<h2>Other interesting rankings:</h2>
<ul class="simple">
<li><a class="reference external" href="http://www.linuxjournal.com/slideshow/readers-choice-2012?page=27">Linux journal</a></li>
</ul>
</div>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Mon, 07 Jan 2013 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/12/17/the_python_condition__why_pypy_is_the_future_of_python.html</link>
            <guid>http://rz.scale-it.pl/2012/12/17/the_python_condition__why_pypy_is_the_future_of_python.html</guid>
            <title><![CDATA[The Python condition. Why PyPy is the future of Python]]></title>
            <description><![CDATA[<div class="section" id="the-python-condition-why-pypy-is-the-future-of-python">
<h1>The Python condition. Why PyPy is the future of Python</h1>
<p>Python is now far more then simply glue or scripting language. For those who think otherwise just check the couple of Python success stories:</p>
<ul class="simple">
<li>YouTube - it’s mainly written in Python</li>
<li><a class="reference external" href="http://python.org/about/success/usa">NASA</a></li>
<li><a class="reference external" href="http://python.org/about/success/ilm">Industrial Light &amp; Magic Runs</a> - the movie company</li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/OpenStack">OpenStack</a></li>
<li><a class="reference external" href="http://www.sagemath.org">Sage</a> - the scientific software, and others (SciPy, PythonXY)</li>
<li>Web programming using Django, Pyramid, bottle...</li>
<li>Revision Control System</li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/List_of_Python_software#Applications">all other great software</a></li>
</ul>
<p>I recommend <a class="reference external" href="http://www.infoq.com/presentations/A-Few-of-My-Favorite-Python-Things">My-Favorite-Python-Things</a> presentation if you are looking for a quick intro to the beauty of Python.</p>
<div class="section" id="high-level-languages-are-mainstream">
<h2>High level languages are mainstream</h2>
<p>Nowadays high level languages allow to write simple code with greater flexibility.
Creating applications faster makes people choosing dynamic languages, where you don’t need to specify types and waste time to fighting with them (all the boilerplate code about interfaces just to satisfy compilation process).
Someone can argue that this behaviour produces buggy code. For those I would say, after Guido van Rossum: “<em>who produces code without test</em>”? Static languages can handle some errors during compile time. But they can’t detect all of them. So in the end you need to write tests, which in the same time are sufficient to test typing and easier to write using dynamic languages.
Moreover people still can’t invent good (far to say perfect) type system. Jim Treavor wrote some <a class="reference external" href="http://trevorjim.com/dynamic-languages">summary</a> about this.</p>
<p>New techniques and knowledge allows us to produce highly efficient runtimes for dynamic languages (JavaScript V8, LuaJIT, Racket, Common Lisp...), which successfully compete with tremendous software frameworks (JVM, .NET, ...)</p>
<p>All of this makes high level languages increasingly popular in enterprises and daily use.</p>
<div class="section" id="is-python-continue-the-success-story">
<h3>Is Python continue the success story?</h3>
<p>Now, Python is very popular. But it’s position is threatened by a competition.
Python has a great ecosystem with huge amount of software and community.
But it lacks efficient and state of the art runtime, which competition already have.</p>
</div>
<div class="section" id="python-as-a-glue-language">
<h3>Python as a glue language.</h3>
<p>As I stated at the beginning one of the features which contribute to Python success is its ability to easily connect to compiled libraries, which makes it perfect as a glue language. But this made Python popular 20 years ago. The tools, which are still popular, are old. The problem with them is you need to make quite a lot of effort to use them:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.python.org/3.3/library/ctypes.html">ctypes</a></li>
<li><a class="reference external" href="http://docs.python.org/3.3/extending">c extensions</a>   are evil. They are bound to specific version of Python and are not reusable. What is worse, <em>c extensions</em> API is different in CPython2 and CPython3. Now imagine porting your library to Python3.</li>
<li><a class="reference external" href="http://cython.org">Cython</a> - It’s designed to easily writing <em>c extensions</em> and it’s good for this task. But I admint that using <em>c extensions</em> is a last thing you want to do. There are better ways (more elaboration below). Cython is an external tool which requires compilation process. It produces non dynamic behaviour in a final code and another syntax to learn. In the end Cython doesn’t support type inference. The problem with Cython is that when you use it you are done - you have no option than compile it. Cython is not a standard. It can’t be used as an interpreted code. Great summary was done by Kay Hayen, the _nuitka_ creator, in <a class="reference external" href="http://nuitka.net/posts/static-compilation-that-is-the-point.html">Static Compilation - That is the point</a> post.</li>
<li><a class="reference external" href="http://www.swig.org/tutorial.html">swig</a>, <a class="reference external" href="http://www.boost.org/doc/libs/1_52_0/libs/python/doc/tutorial/doc/html/index.html">boost</a>  - those are quiet easy, usually requires some changes in C/C++ code, or write some schema file.</li>
</ul>
<p>In contrast there are new tools which handle this task far more better preserving performance (even outperforming it):</p>
<ul class="simple">
<li><a class="reference external" href="http://cffi.readthedocs.org/en/latest">cffi</a> - package which allows easily handling your C libraries. You often need to do it while touching a hardware or supporting some other software (like database clients/drivers). Just check how easy is to use it with Python. You don’t need to write any wrapper, typed code. Moreover has CPython and PyPy support.</li>
<li><a class="reference external" href="https://github.com/dabeaz/bitey">bitey</a></li>
</ul>
<div class="section" id="python-as-a-brain-of-your-code-other-aspect-of-a-glue-language">
<h4>Python as a brain of your code - other aspect of a glue language</h4>
<p>There is also other aspect of a <em>glue language</em>. Let’s think about process of low level high performance programming. It probably looks similar to the following process:</p>
<ul class="simple">
<li>idea</li>
<li>lot of complicated low level and organization code. Probably in C++ with a bunch of obscure template code (for re usability)</li>
<li>writing glue code</li>
<li>compilation</li>
<li>running</li>
<li>probably a lot of debugging and return back to writing, because of the amount of low level code.</li>
</ul>
<p>Thanks Python’s portability, scripting nature and big amount of tools, it is used as a template and brain engine for your code.
That means you only write the smallest amount of required low level code, and python do the rest: generating the organization code, and the context required for your low level code.</p>
<p>This takes back to Lisp idea, where code is a data, and makes sense of code about other code that is executed (<em>code as a data to process</em>). So the machine can think about what is executing in runtime, then optimizing it, reasoning about full data information in true generic way without templating you known from C++. This is what C++ and other popular languages lost.
At the end we have lower abstraction level but stronger runtime knowledge which allows compiler for:</p>
<ul class="simple">
<li>Specialize for unknown hardware (at code writing time), the problem with supported types, and available optimizations.</li>
<li>Automated tuning (e.g. your data for libraries like ATLAS...)</li>
<li>Allow so put other information to compiler which far more reasoning.</li>
<li>People don’t struggle with data types (Runtime allows to makes it fast, appropriate and... already done)</li>
</ul>
<p>So the process looks like:</p>
<ul class="simple">
<li>idea</li>
<li>little of Python code (the pretty one) - for organization, and low level code - also much nicer because without the rubbish template and context code. Actually low level code can be generated from python code.</li>
<li>running</li>
<li>debugging, but much less times then in previous process.</li>
</ul>
<p>In terms of performance it gives a <strong>better potential</strong> then previous approach.</p>
<p>Examples which already use it: PyPy, cffi, PyOpenCL, PyCUDA, numba, theano...</p>
</div>
</div>
<div class="section" id="python-as-a-fast-language">
<h3>Python as a fast language</h3>
<p>There are a lot of ways to write a fast code with python.
The most popular and unfortunately still propagated is to write the <em>hot</em> parts of application in a low level language and then use CPython C API.</p>
<p>All the python shining efficient tools requires a lot of complicated c code, which block other contributors to come in.
Now we would like to write fast and beauty python code.</p>
<p>There are a lot of tools to compile a code python to machine code: Nuitka, Python2C, Shedskin, pythran. In my opinion they fail because when you use them you need to say goodbye for dynamic behaviour of the code. They support only a subset of the python language and they are far far away to support it completely. I even don’t believe they will. Besides they don’t use state of the art techniques and runtime information which makes JITs solutions shining.</p>
</div>
</div>
<div class="section" id="multicore-programming">
<h2>Multicore Programming</h2>
<p>Can’t write anything better to present the issue then Armins Rigo <a class="reference external" href="http://morepypy.blogspot.com/2012/08/multicore-programming-in-pypy-and.html">Multicore Programming in PyPy and CPython</a></p>
</div>
<div class="section" id="interpreter-design">
<h2>Interpreter Design.</h2>
<p>To make further development easy and implement state of the art techniques for dynamic languages Python needs suitable implementation with well advised architecture. Current CPython architecture is limited because of its simplicity. It makes hard to do things like  JIT compiler. Just check fails of some attempts to enhance CPython interpreter:</p>
<ul class="simple">
<li>psyco (was abandoned in favour of PyPy)</li>
<li>Unladen swallow</li>
<li>a lot of fails with removing GIL</li>
<li>There are forks which tries repairs some flaws in CPython: Stackless and HotPy, but firmness of Guido (the Benevolent Dictator for Life in Python) hardly stops to merge those projects. (To be clear HotPy is not yet production ready).</li>
</ul>
<p>One of the biggest drawback of sticking to closely with CPython is it’s C API - which is not well designed. Other implementations suffer because of that.</p>
<div class="section" id="what-can-we-do">
<h3>What can we do?</h3>
<ol class="arabic simple">
<li>Promote new tools for glue code ( <strong>cffi</strong>, <strong>bitey</strong>)</li>
<li>Stop rely on low level properties of CPython (C API, c extensions) for common libraries. Instead use some intermediate tools which can handle this:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li><em>cffi</em>   - to easily use C libraries</li>
<li><em>cython</em> - to write portable <em>c extensions</em>. I don’t recommend it for general programming, but still it’s better and easier to maintain then <em>c extensions</em>. Cython already has both CPython and PyPy backend.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="why-pypy-is-the-future">
<h3>Why PyPy is the future?</h3>
<p>PyPy provides much better architecture for optimization and further language development. PyPy already comes with the solution for most of the Pythons issues:</p>
<ul class="simple">
<li>state of the art runtime and design described in <a class="reference external" href="http://www.aosabook.org/en/pypy.html">The Architecture of Open Source Applications</a>.</li>
<li>speed - PyPy buildin JIT shines. Sometime (actually rarely) can bit even C!</li>
<li>GIL issue - PyPy is coming with great STM implementation, which is already mentioned in Armins Rigo <a class="reference external" href="http://morepypy.blogspot.com/2012/08/multicore-programming-in-pypy-and.html">article</a>.</li>
<li>glue code - easy handling c libraries with cffi, which is even faster than ctypes in CPython!</li>
<li>asynchronous programming. PyPy has build in greenlets which are better suited in, then the original c extension for CPython. In fact Further development of stackless concept (and thus greenlets) are going to PyPy (check <a class="reference external" href="https://ep2012.europython.eu/conference/talks/the-story-of-stackless-python">https://ep2012.europython.eu/conference/talks/the-story-of-stackless-python</a>)</li>
<li>sandboxing</li>
<li>using in web and mobile. Dusty makes some post about this in <a class="reference external" href="http://archlinux.me/dusty/2012/10/04/pushing-python-past-the-present">Pushing Python Past the Present</a></li>
</ul>
<p>PyPy already has support for multiple platforms (x86, 64_x86, ARM)</p>
<p>PyPy also offers a great, modern architecture which is well described in <a class="reference external" href="http://www.slideshare.net/jserv/pypy-dynamic-language-compilation-framework">Jim Huang presentation</a>
The key points are:</p>
<ul class="simple">
<li>framework for interpreted languages</li>
<li>compound of components for research and production (different data models, garbage collectors - can be changed for specific use)</li>
<li>build on top of functional architecture with chained components (translation toolchains). Each step extends/transforms the program model, introduces features, backends (JVM, JavaScript, LLVM, GCC IR...). Examples of translations: <em>python code -&gt; bytecode -&gt; function objects -&gt; type inference -&gt; garbage collector -&gt; JIT</em></li>
<li>includes a lot of modern optimization techniques developed on different level of architecture (allows to simplify this task)</li>
</ul>
<p>I believe that making all software to cooperate with PyPy is a huge effort - it requires a lot of work in existing libraries. But producing software which cooperates with PyPy and CPython can be done even easier using new tools (mentioned in <em>What can we do</em>)  then relying on <em>c extensions</em>.</p>
</div>
<div class="section" id="cpython-legacy">
<h3>CPython legacy</h3>
<p>Here I need to admit the  great legacy of CPython dependent code (due to tight relying on <em>c extensions</em>). Mainly it is scientific software (NumPy, SciPy ...). Python is used by scientists long before PyPy became production ready (I think it was 2 year ago), and since that time it grows in terms of tools, codebase and community. All of them make a brilliant platform which is often choose as an alternative to Matlab and others (someone can even argument as a better alternative). Even thought <em>c extensions</em> was the only ready solution to produce this. Now the efforts are still tight to CPython because there is an enormous work required to make all the scientific stack compatibility with PyPy. The simpler solution is to make some on-demand JIT - decorating particular functions and then on the fly compile them to machine code and swap them using <em>c extensions</em>. This idea doesn’t require rewriting all the scientific platform and also provides fast runtime. The prominent project which use this idea is <strong>numba</strong> sponsored by Continuum Analytics (the company which deliver robust scientific platform based on python libraries). Numba chose this direction because it wants to make fast scripts compatible with all other scientific code which now is depend on CPython. It is worth to learn about numba. Good explanation can be found at <a class="reference external" href="http://www.youtube.com/watch?v=WYi1cymszqY">numba talk</a> from SciPy conference.</p>
<p>I must say that the community around scientific Python is great. They really care about quality, usage  and promotion (by organizing a lot of conferences: SciPy conf, PyData) of their products. Thanks to them Python is the first choice free platform for scientific analysis. I need also to mention about Travis Oliphant, who put a lot of effort in the community and makes the whole platform coherent. Some summary about this can be found in a blog post: <a class="reference external" href="http://jakevdp.github.com/blog/2012/09/20/why-python-is-the-last">Why Python Is the Last Language You’ll Have to Learn</a></p>
<div class="section" id="what-about-pypy">
<h4>What about PyPy?</h4>
<p>I wish that PyPy was not production ready before.</p>
</div>
<div class="section" id="succession">
<h4>Succession</h4>
<p>The succession of this story is an interesting <a class="reference external" href="http://www.reddit.com/r/Python/comments/151vvu/interesting_post_the_python_condition_why_pypy_is">discussion</a> on Reddit. It is about goodness and issues of PyPy business adoption. The commenters discuss architectural conclusions of using PyPy based high performance libraries. The most important is that using PyPy stack (raw python, cffi, ...) makes them easier to maintain and optimize (eg: deferred computations). The drawbacks are those mentioned here, related to CPython legacy.</p>
</div>
</div>
<div class="section" id="references">
<h3>References</h3>
<p>[1] <a class="reference external" href="http://www.gossamer-threads.com/lists/python/dev/998582">A new JIT compiler for a faster CPython discussion</a> <br/>
[2] <a class="reference external" href="http://morepypy.blogspot.com/2012/08/multicore-programming-in-pypy-and.html">Multicore programming</a> <br/>
[3] <a class="reference external" href="https://ep2012.europython.eu/conference/talks/the-story-of-stackless-python">The story of stackless</a> <br/>
[4] <a class="reference external" href="http://technicaldiscovery.blogspot.no/2011/10/thoughts-on-porting-numpy-to-pypy.html">http://technicaldiscovery.blogspot.no/2011/10/thoughts-on-porting-numpy-to-pypy.html</a> <br/>
[5] <a class="reference external" href="http://nuitka.net/posts/static-compilation-that-is-the-point.html">Static Compilation - That is the point</a> - Summary of problems when developing with Cython. <br/>
[6] <a class="reference external" href="http://jakevdp.github.com/blog/2012/09/20/why-python-is-the-last">Why Python Is the Last Language You’ll Have to Learn</a> <br/>
[7] <a class="reference external" href="http://archlinux.me/dusty/2012/10/04/pushing-python-past-the-present">Pushing Python Past the Present</a> <br/></p>
</div>
</div>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Mon, 17 Dec 2012 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/12/13/scala_tutorial_for_programmers.html</link>
            <guid>http://rz.scale-it.pl/2012/12/13/scala_tutorial_for_programmers.html</guid>
            <title><![CDATA[Scala tutorial for programmers]]></title>
            <description><![CDATA[<div class="section" id="scala-tutorial-for-programmers">
<h1>Scala tutorial for programmers</h1>
<p>Finally I get myself together and publish my <a class="reference external" href="/docs/scala.html">Scala tutorial for programmers</a> (it is linked under <em>menu -&gt; documents</em>).</p>
<p>I started working on two years ago, but didn’t have enough time to finish it. This year I almost didn’t make any update (fortunately Scala also has’nt much of them). If you find any errors please contact me.</p>
<p>I started fascinating Scala in 2008, when I found this language as an impressive work on JVM, and how many clever features can be work on top of it.
Scala shows that programming on JVM can be fast and compact. Just dive into and read!</p>
<p>Unfortunately I dislike Scala <a class="reference external" href="/docs/scala.html#heading_toc_j_131">implicits</a> overhead and abuse of symbolic functions literals, like <span class="docutils literal"><span class="pre">:%,</span> <span class="pre">:=&gt;,</span> <span class="pre">~&gt;,</span> <span class="pre">\/,</span> <span class="pre">\\/</span></span> (here I typed 5 different names). For a Scala expert it can be fun. But Scala world is tight to Java one and not everyone a programming master. When someone needs to look into <em>implicits</em> mess, I’m sure he will need some painkillers.
Neverless it contains a lot of brillinat constructs and state of the art solutions from programming languages theory and programming patterns (eg: <em>cake pattern</em>).</p>
<p>At the end I’m still Python evangelist :)</p>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Thu, 13 Dec 2012 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/12/10/blog_moved.html</link>
            <guid>http://rz.scale-it.pl/2012/12/10/blog_moved.html</guid>
            <title><![CDATA[Blog moved]]></title>
            <description><![CDATA[<div class="section" id="blog-moved">
<h1>Blog moved</h1>
<p>I’ve just moved my blog from <a class="reference external" href="http://robert-zaremba-it.posterous.com">http://robert-zaremba-it.posterous.com/</a>. I migrate most of the content. Here you can find my new posts.</p>
<p>The blog was redesigned. It is based on my previous blog. Big thanks to <a class="reference external" href="http://martazaremba.wix.com/human-space">Marta Zaremba</a> who makes the final design, which is so cool (at least for me).</p>
<p>Previously I used <a class="reference external" href="http://posterous.com">http://posterous.com</a> platform for blogging. But since twitter bought it there was no development and progress in the palatform.</p>
</div>]]></description>
             <pubDate>Mon, 10 Dec 2012 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/11/16/keep_your_session_open.html</link>
            <guid>http://rz.scale-it.pl/2012/11/16/keep_your_session_open.html</guid>
            <title><![CDATA[Keep your session open]]></title>
            <description><![CDATA[<div class="section" id="keep-your-session-open">
<h1>Keep your session open</h1>
<p>Have you ever thought how to keep session open on remote host, or want to run multiple processes in a background?</p>
<p>You may hear about <a class="reference external" href="http://en.wikipedia.org/wiki/Nohup">nohup</a>, but it is uncomfortable and doesn’t allow you to come back to this process.</p>
<div class="section" id="tmux-and-screen">
<h2>tmux and screen</h2>
<p>Multiplex virtual consoles are the way to go.
Both are well known and widely used in the Linux world.</p>
<p>I prefer tmux. It has more features, is more comfortable and beauty out of the box. According to <strong>tmux</strong> FAQ:</p>
<ul class="simple">
<li>A clearly defined client/server model (windows are their own clients which allows flexibility on how you handle windows. You can attach and detach different windows in different sessions without any issues)</li>
<li>Consistent, well-documented command interface. (You can use the same commands interactively as in the .tmux.conf file, more on that later)</li>
<li>Easily scriptable</li>
<li>Multiple paste buffers</li>
<li>Vi &amp;amp; Emacs keybindings</li>
<li>A more usable status line syntax (which also allows you to embed the output of a shell command, handy indeed.</li>
</ul>
<div class="section" id="how-to-start">
<h3>How to start</h3>
<p>Imagine you are logged in a remote server and want to download big file.
Just enter into virtual console and make the job there:</p>
<div class="highlight-python"><div class="highlight"><pre>tmux
## the multiplex will run
wget http://sever.com/some_file
</pre></div>
</div>
<p>To go back to main console type: <strong>prefix d</strong> (detach)
Then you can logout, and later log in and type:</p>
<div class="highlight-python"><div class="highlight"><pre>tmux attach
</pre></div>
</div>
<p><em>prefix</em> is a key combination used to make some actions. By default
<strong>`prefix = Ctrl-b`</strong>
Since in <em>screen</em> <span class="docutils literal"><span class="pre">prefix=Ctrl-a</span></span>, it is nice to use the same prefix. Moreover, in my opinion, <span class="docutils literal"><span class="pre">Ctrl-a</span></span> is easier to type.
To change the prefix, you need to edit tmux configuration file (<span class="docutils literal"><span class="pre">~/.tmux.conf</span></span>)</p>
</div>
<div class="section" id="tmux-configuration">
<h3>tmux configuration</h3>
<div class="highlight-sh"><div class="highlight"><pre><span class="c"># ~/.tmux.conf</span>
<span class="c"># remap prefix to Ctrl-a</span>
<span class="nb">set</span> -g prefix c-a
unbind c-b
<span class="nb">bind </span>c-a send-prefix

<span class="c"># set vi mode. Enter Ctrl+a [ to navigate like in vi. Enter return to get out of the mode</span>
setw -g mode-keys vi


<span class="c"># force a reload of the config file</span>
unbind r
<span class="nb">bind </span>r <span class="nb">source</span>-file ~/.tmux.conf

<span class="c"># quick pane cycling</span>
unbind ^a
<span class="nb">bind</span> ^a <span class="k">select</span>-pane -t :.+
</pre></div>
</div>
</div>
<div class="section" id="working-with-tmux">
<h3>Working with tmux</h3>
<ul class="simple">
<li>Commands in tmux can be entered from command line: <cite>tmux  &lt;command&gt;</cite>
your console emulator might support <em>tab</em> completion with <cite>tmux &lt;tab&gt;</cite></li>
<li>in tmux session <cite>prefix :</cite></li>
<li>directly using key shortcut (like previously mentioned <cite>prefix-d</cite> to detach)</li>
</ul>
<div class="section" id="session-management">
<h4>Session management</h4>
<p>tmux can manage multiple session.</p>
<ul class="simple">
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">new</span> <span class="pre">-s</span> <span class="pre">session_name</span></span> <br/>
creates a new tmux session named session_name</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">attach</span> <span class="pre">-t</span> <span class="pre">session_name</span></span> <br/>
attaches to an existing tmux session named session_name</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">switch</span> <span class="pre">-t</span> <span class="pre">session_name</span></span> <br/>
switches to an existing session named session_name</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">list-sessions</span></span> <br/>
lists existing tmux sessions</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">detach</span> <span class="pre">(prefix</span> <span class="pre">d)</span></span> <br/>
detach the currently attached session</li>
</ul>
</div>
<div class="section" id="windows-and-panes">
<h4>Windows and panes</h4>
<p>In single tmux session you can have multiple windows/tabs. It is very helpful when creating multiple windows to set them names.
On tmux you can divide to multiple panes, each one will be occupied by some window</p>
<ul class="simple">
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">new-window</span> <span class="pre">[-n</span> <span class="pre">window-name]</span> <span class="pre">[-t</span> <span class="pre">target</span> <span class="pre">window]</span> <span class="pre">[command]</span></span> <em>(prefix  c)</em> <br/>
a new window and optionally run there a command. The <em>-t</em> option specify where to put new window (as a which window) - can be in form [session_name:]window_num</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">rename-window</span></span> <em>(prefix  ,)</em> <br/>
rename the current window</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">select-window</span> <span class="pre">-t</span> <span class="pre">:0-9</span></span> <em>(prefix  0-9)</em> <br/>
move to the window based on index</li>
<li><span class="docutils literal"><span class="pre">kill-window</span></span> <em>(prefix &amp;)</em> <br/>
kill current window</li>
<li><em>prefix n / p / l / w</em> <br/>
move to next / previous / previously selected window / list windows</li>
<li><span class="docutils literal"><span class="pre">find-window</span></span> <em>(prefix f)</em> <br/>
find window by name</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">split-window</span></span> <em>(prefix ”)</em> <br/>
splits the window into two vertical panes</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">split-window</span> <span class="pre">-h</span></span> <em>(prefix %)</em> <br/>
splits the window into two horizontal panes</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">swap-pane</span> <span class="pre">-[UDLR]</span></span> <em>(prefix { or })</em> <br/>
swaps pane with another in the specified direction</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">select-pane</span> <span class="pre">-[UDLR]</span></span> <br/>
selects the next pane in the specified direction</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">select-pane</span> <span class="pre">-t</span> <span class="pre">:.+</span></span> <em>(prefix o</em> or <em>prefix C-a)</em> <br/>
selects the next pane in numerical order</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">display</span> <span class="pre">panes</span></span> <em>(prefix q)</em> <br/>
Show pane numbers (used to switch between panes)</li>
<li><span class="docutils literal"><span class="pre">move-window</span> <span class="pre">[</span> <span class="pre">&amp;minus;d]</span> <span class="pre">[</span> <span class="pre">&amp;minus;s</span> <span class="pre">src-window]</span> <span class="pre">[</span> <span class="pre">&amp;minus;t</span> <span class="pre">dst-window]</span></span></li>
<li><span class="docutils literal"><span class="pre">swap-window</span> <span class="pre">[</span> <span class="pre">-d]</span> <span class="pre">[</span> <span class="pre">-s</span> <span class="pre">src-window]</span> <span class="pre">[</span> <span class="pre">-t</span> <span class="pre">dst-window]</span></span></li>
<li><span class="docutils literal"><span class="pre">break-pane</span></span> <br/>
make your pane into its own window</li>
</ul>
</div>
<div class="section" id="other-useful">
<h4>Other useful</h4>
<ul class="simple">
<li><em>prefix :</em> <br/>
enter command</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">list-keys</span></span> <em>(prefix ?)</em> <br/>
lists out every bound key and the tmux command it runs</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">list-commands</span></span> <br/>
lists out every tmux command and its arguments</li>
<li><span class="docutils literal"><span class="pre">tmux</span> <span class="pre">info</span></span> <br/>
lists out every session, window, pane, its pid, etc.</li>
<li><em>prefix [</em> <br/>
to navigate like in <em>vi</em>. Enter <em>return</em> to get out of the mode</li>
</ul>
</div>
</div>
<div class="section" id="further-reading">
<h3>Further reading</h3>
<ul class="simple">
<li><a class="reference external" href="http://blog.hawkhost.com/2010/07/02/tmux-%E2%80%93-the-terminal-multiplexer-part-2">tweaking tmux</a></li>
<li><a class="reference external" href="http://hyperpolyglot.org/multiplexers">key bindings comparison between tmux and screen</a></li>
</ul>
</div>
<div class="section" id="for-screen-users">
<h3>For Screen users</h3>
<ul class="simple">
<li><a class="reference external" href="http://www.pixelbeat.org/lkdb/screen.html">key bindings</a></li>
<li><a class="reference external" href="http://web.mit.edu/gnu/doc/html/screen_9.html">window title, bars</a></li>
<li><a class="reference external" href="http://www.saltycrane.com/blog/2008/01/how-to-scroll-in-gnu-screen">scrolling, copying, opening sessions</a> in screen</li>
<li><a class="reference external" href="http://www.delorie.com/gnu/docs/screen/screen_62.html">key codes</a> - Input Translation</li>
</ul>
</div>
</div>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Fri, 16 Nov 2012 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/06/04/hash_function_benchmark_in_python.html</link>
            <guid>http://rz.scale-it.pl/2012/06/04/hash_function_benchmark_in_python.html</guid>
            <title><![CDATA[Hash function benchmark in python]]></title>
            <description><![CDATA[<div class="section" id="hash-function-benchmark-in-python">
<h1>Hash function benchmark in python</h1>
<p>I got a task to process a documents which might change. So there need to be some worker process which crawl for processed documents, read new version and check the difference. I don’t want to get into details, but there was no point to store whole document, or some part of it to detect if document changed. If it changed it needs to be reprocessed from the beginning.</p>
<p>The simplest solution is to keep hash of the document, and than compare to hash of the new version. If it is different, than document was changed.</p>
<p>There are a lot of hash function. We can divide then into two groups:</p>
<ul class="simple">
<li>noncryptographic</li>
<li>cryptographic – we have additional requirement – having only hash result must be hard to find a document which hash equals result.</li>
</ul>
<p>Generally <em>noncryptographic</em> functions are faster.</p>
<p>The most well known hash functions are <strong>sha</strong> and <strong>md5</strong>. Since cryptographic wasn’t requirement, I look for others hash functions.</p>
<p>I don’t want to repeat some good texts about hash functions, so i point to two of them:</p>
<ul class="simple">
<li><a class="reference external" href="http://blog.aggregateknowledge.com/2011/12/05/choosing-a-good-hash-function-part-1">Choosing a Good Hash Function</a></li>
<li><a class="reference external" href="http://burtleburtle.net/bob/hash/doobs.html">A Survey of Hash Functions</a></li>
</ul>
<p>I think, the best non-cryptographic hash function is <a class="reference external" href="http://code.google.com/p/smhasher/wiki/MurmurHash">MurmurHash</a> because:</p>
<ul class="simple">
<li>it’s darn fast</li>
<li>stable</li>
<li>used by others (Microsoft, Google)</li>
<li>great fraction of keys hashed without collision</li>
<li>has good avalanche behavior</li>
</ul>
<p>Here I present Python (2.7.3) and PyPy (1.8) performance test for some hash functions. The numbers are time execution of the test in seconds</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%"/>
<col width="31%"/>
<col width="38%"/>
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">method</th>
<th class="head">cpython</th>
<th class="head">pypy 1.8</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>md5</td>
<td>3.495</td>
<td>3.621</td>
</tr>
<tr class="row-odd"><td>mmh3</td>
<td>0.4336</td>
<td>6.186</td>
</tr>
<tr class="row-even"><td>smhasher</td>
<td>0.4417</td>
<td>5.877</td>
</tr>
<tr class="row-odd"><td>lookup3</td>
<td>1.6933</td>
<td>7.963</td>
</tr>
<tr class="row-even"><td>pyhash</td>
<td>0.00022</td>
<td>unsupported</td>
</tr>
</tbody>
</table>
<p>The test is very simple. It reads some html file (441KB) and just timeit for 4000 times:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">timeit</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">md5</span>
<span class="kn">import</span> <span class="nn">mmh3</span>     <span class="c"># http://pypi.python.org/pypi/mmh3/2.0</span>
<span class="kn">import</span> <span class="nn">smhasher</span> <span class="c"># http://pypi.python.org/pypi/smhasher</span>
<span class="kn">import</span> <span class="nn">pyhash</span>   <span class="c"># http://code.google.com/p/pyfasthash/</span>
                <span class="c"># need to install previously sudo apt-get install libboost-python-dev</span>
<span class="kn">import</span> <span class="nn">lookup3</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;ruya.html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">4000</span>
<span class="n">repeat_n</span><span class="o">=</span><span class="mi">1</span>
<span class="n">setup_c</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">from hashlib import md5</span>
<span class="s">import mmh3</span>
<span class="s">import smhasher</span>
<span class="s">import lookup3</span>
<span class="s">#import pyhash</span>
<span class="s">data=open('ruya.html').read()</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="k">print</span> <span class="s">&quot;*&quot;</span><span class="o">*</span><span class="mi">40</span>
<span class="k">print</span> <span class="s">&quot;md5:&quot;</span><span class="p">,</span>  <span class="n">timeit</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">stmt</span><span class="o">=</span><span class="s">&quot;md5(data).digest()&quot;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="n">setup_c</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="n">repeat_n</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;mmh3:&quot;</span><span class="p">,</span> <span class="n">timeit</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">stmt</span><span class="o">=</span><span class="s">&quot;mmh3.hash_bytes(data)&quot;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="n">setup_c</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="n">repeat_n</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;smhasher&quot;</span><span class="p">,</span>  <span class="n">timeit</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">stmt</span><span class="o">=</span><span class="s">&quot;smhasher.murmur3_x64_128(data)&quot;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="n">setup_c</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;lookup3&quot;</span><span class="p">,</span>  <span class="n">timeit</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">stmt</span><span class="o">=</span><span class="s">&quot;lookup3.hashlittle(data)&quot;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="n">setup_c</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
</pre></div>
</div>
</div>]]></description>
            <category><![CDATA[ computer science ]]></category>
             <pubDate>Mon, 04 Jun 2012 00:00:00 +0200</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/05/13/scala_posts_on_scala_net_pl.html</link>
            <guid>http://rz.scale-it.pl/2012/05/13/scala_posts_on_scala_net_pl.html</guid>
            <title><![CDATA[Scala posts on scala.net.pl]]></title>
            <description><![CDATA[<div class="section" id="scala-posts-on-scala-net-pl">
<h1>Scala posts on scala.net.pl</h1>
<p>Hi,</p>
<p>Recently I’m posting some articles about Scala programming language at <a class="reference external" href="http://scala.net.pl">scala.net.pl</a>. It is in polish language. But someone might find it interesting.</p>
<p>My posts are reachable with: <a class="reference external" href="http://scala.net.pl/author/robert-zaremba">http://scala.net.pl/author/robert-zaremba/</a></p>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Sun, 13 May 2012 00:00:00 +0200</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/01/27/actor_and_functional_thinking_in_contrast_to_imperative_one.html</link>
            <guid>http://rz.scale-it.pl/2012/01/27/actor_and_functional_thinking_in_contrast_to_imperative_one.html</guid>
            <title><![CDATA[Actor and functional thinking in contrast to imperative one]]></title>
            <description><![CDATA[<div class="section" id="actor-and-functional-thinking-in-contrast-to-imperative-one">
<h1>Actor and functional thinking in contrast to imperative one</h1>
<p>After reading <a class="reference external" href="http://www.doc.ic.ac.uk/~nd/surprise_97/journal/vol2/pjm2">“Why has the actor model not succeeded?”</a> (which I really recommend to read) I’ve started to think about similarities with functional languages.</p>
<p>Actor model was introduced to as an easy and straight solution for projecting distributed systems.</p>
<p>Functional languages come to substitute imperative style focused on “how machines think” by a maths model - “how human would think in straight way”.</p>
<p>The problem with Actor model is we think about some program to call a method or to send a request to make a method. If we think to call a method then we have this method and we can call it. On the other way if we think to send a request then we have a “tool” which performs sending request. That is a straight way.</p>
<p>In actor model encapsulation goes with actors itself. So if we want to hide some abstraction in a “boxes” we make an actors which has functionality of an abstraction. Then if we want to use the functionality we need to send a message as a request to an actor.</p>
<p>On the other hand Functional programming model allows us to directly call the function, deliver great tools to message passing, and abstract distribute system by simply functions. And we still think functional.</p>
<p>For those who want an object model with hierarchy (prefer abstract with inheritance than higher kind of polymorphism as an Abstract Data Type and classtypes or functors) there is great language: <a class="reference external" href="http://scala-lang.org">Scala</a> which is brilliant in mixing object oriented programming with functional.</p>
<p>I will try to approach Scala in some next posts.</p>
</div>]]></description>
            <category><![CDATA[ computer science ]]></category>
             <pubDate>Fri, 27 Jan 2012 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/01/09/jabber_client_behind_firewall_and_proxy.html</link>
            <guid>http://rz.scale-it.pl/2012/01/09/jabber_client_behind_firewall_and_proxy.html</guid>
            <title><![CDATA[Jabber client behind firewall and proxy]]></title>
            <description><![CDATA[<div class="section" id="jabber-client-behind-firewall-and-proxy">
<h1>Jabber client behind firewall and proxy</h1>
<p>There is a great article explaining how to setup jabber client to connect to jabber server which is outside firewall: <a class="reference external" href="https://web.amessage.eu/firewalled">https://web.amessage.eu/firewalled</a></p>
<p>Behind the scene, if your jabber server don’t support connection through 80/443 port, then you can:</p>
<ol class="arabic simple">
<li>register new account on jabber80.com</li>
<li>Most of the desktop clients support automatic account registration.</li>
<li>install a client that support proxy connection (vacuum-im, psi)</li>
<li>manage a account to connect through proxy (need to know the company proxy)</li>
<li>use <span class="docutils literal"><span class="pre">jabber80.com:443</span></span> as a  server to connect to.</li>
</ol>
<p>The company I work for uses firewall that block everything besides HTTP :80/443 and proxy to manage outside connection.</p>
<p>I succeed with setup my desktop client to jabber.wp.pl and talk.google servers.</p>
<div class="section" id="talk-google">
<h2>talk.google</h2>
<p>The configuration for google talk is as follows (for vacuum-im):</p>
<ol class="arabic simple">
<li>set your credentials (<a class="reference external" href="mailto:username%40gmail.com">username<span>@</span>gmail<span>.</span>com</a>)</li>
<li>enable and configure the proxy server (the one you use to connect to internet)</li>
<li>tick “Use legacy SSL connection”</li>
<li>manually set the host: talk.google.com   port: 443 or 80</li>
</ol>
<div class="line-block">
<div class="line">The standard configuration for jabber at talk.google is described on <a class="reference external" href="http://support.google.com/talk/bin/answer.py?hl=en&amp;answer=24074&amp;topic=1415&amp;ctx=topic">google support pages</a></div>
<div class="line">[Edit]</div>
<div class="line">Recently I read that google also <a class="reference external" href="http://support.google.com/talk/bin/answer.py?hl=en&amp;answer=27930">uses 5222 port</a>!</div>
</div>
<p>There is also solution with proxytunel, described <a class="reference external" href="http://vnoel.wordpress.com/2008/01/30/google-talk-in-ichat-behind-a-firewall">here</a>. I didn’t try this.</p>
</div>
<div class="section" id="left-with">
<h2>Left with</h2>
<p>Since I normally don’t use google account, and my primary jid is at jabber.org; I was forced to use my previous solution - jabber web client which is bundled into mail service I use (zoho.com). Generally all web clients works fine (assuming the proxy is configured correctly).</p>
<p>Other good topics and answers you can find at: <a class="reference external" href="http://www.softwaretalk.info/google-talk">http://www.softwaretalk.info/google-talk/</a></p>
</div>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Mon, 09 Jan 2012 00:00:00 +0100</pubDate>
        </item>
    
        <item>
            <link>http://rz.scale-it.pl/2012/01/02/how_to_add_gps__geolocation__tags_to_photos.html</link>
            <guid>http://rz.scale-it.pl/2012/01/02/how_to_add_gps__geolocation__tags_to_photos.html</guid>
            <title><![CDATA[How to add GPS (geolocation) tags to photos]]></title>
            <description><![CDATA[<div class="section" id="how-to-add-gps-geolocation-tags-to-photos">
<h1>How to add GPS (geolocation) tags to photos</h1>
<p>There are a lot of web services which read the metadata from pictures and display them. Among doses metadata are those to store gps coordinates. Some services use them to present the location, where a picture was taken.
The usually metadata info are stored is <a class="reference external" href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format">EXIF</a> which is one of the popular by camera manufactures and web services. There are also other standards, but not such popular or quiet old.</p>
<p>Nowadays some of the cameras and a lot of mobiles have a gps module, so the can put geolocation information to picture in the moment it is taken.</p>
<p>But what if we have a pictures without geolocation information? I thought there are be a lot of free Linux programs to put this information into picture.
But I spend some hours to look for them. I couldn’t find comfortable easy, small application which adds geolocation to picture!</p>
<h4>Application for exif metadata present, or to allow edit only the most popular</h4><ul class="simple">
<li>gwenview (present all included information, but allow to edity only the mos popular keys, but not the ones from geolocation)</li>
<li>digiKam / showFoto - only present the metadata</li>
<li>gthum - only present the metadata</li>
<li>gimp - don’t allow to present / edit metadata unless without special plugin (I didn’t check). What is worse it delete metadata information from picure!</li>
</ul>
<h4>Application for adding automaticly geolocation info from gps log file (gpx).</h4><p>After googleing for “how to add geolocation / geodata / geocalucus to picture” I found some programs that read the gps logs, check the catalogue, look for appropriate pictures and update geolocation info.
The problem is that</p>
<ol class="arabic simple">
<li>you need to have gps log file.</li>
<li>Ok, you can make some file - this requires additional work, and to learn how this file looks like.</li>
<li>the pictures timestamp must correspond to timestamp from gps log file! Those tools check if picture was taken in a similar time gps log a position.</li>
</ol>
<p>So it can be quiet problematic. But the applications are:</p>
<ol class="arabic simple">
<li>gpicsync</li>
<li>gpscorrelate</li>
</ol>
<h4>Application that allow handy put geolocation into picture.</h4><p>Finaly I found some of them:</p>
<ol class="arabic simple">
<li>exiv2 (command line)</li>
<li>exiftool (command line)</li>
<li>gexif</li>
</ol>
<p>The best are those command line - they allow to easy scripting!</p>
<p>As noted by <a class="reference external" href="http://disqus.com/derekc6o">Darek</a> to make your GPS geolocation usefull you should specify following data:</p>
<ul class="simple">
<li>longitude degrees + direction ref (north or south)</li>
<li>latitude  degrees + direction ref (east or west)</li>
</ul>
<p>Example of using exiftool
<em>set longtitude latitude with exiftool</em></p>
<div class="highlight-bash"><div class="highlight"><pre>% exiftool -GPSLongitude<span class="o">=</span><span class="s2">&quot;14.273586&quot;</span>  -GPSLatitude<span class="o">=</span><span class="s2">&quot;50.860361&quot;</span> img.png
</pre></div>
</div>
<p>Example of using exiv2</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">## print summary of image metadata (default behaviour when we run: exiv2 img.jpg)</span>
% exiv2 pr -p s img.jpg

<span class="c">## print all metadata from img</span>
% exiv2 pr -p a img.jpg

<span class="c">## extract GPS info</span>
% exiv2 pr -p a img.jpg  <span class="p">|</span> grep GPS

<span class="c">## set image latitude to 14.12213 deg == 14deg 16' 24.910&quot;, we need to put 3 vaules of type &lt;natural_val/1[0*number of digits after dot -1]&gt;</span>
% exiv2 -M<span class="s2">&quot;set  Exif.GPSInfo.GPSLatitude 1412213/100000 0/1 0/1&quot;</span> -M<span class="s2">&quot;set Exif.GPSInfo.GPSLatitudeRef N&quot;</span> img.jpg

<span class="c">## set image latitude to 14deg 16' 24.910&quot;</span>
% exiv2 -M<span class="s2">&quot;set  Exif.GPSInfo.GPSLatitude 14/1 16/1 24910/1000&quot;</span> -M<span class="s2">&quot;set Exif.GPSInfo.GPSLatitudeRef N&quot;</span> img.jpg

<span class="c">## loop throug all files in current catalogue and set set both latitude and longtitude to 14deg 16' 24.910&quot;</span>
% <span class="k">for</span> f in *.jpeg<span class="p">;</span> <span class="k">do</span>
    exiv2 -M<span class="s2">&quot;set  Exif.GPSInfo.GPSLatitude 1412213/100000 0/1 0/1&quot;</span> -M<span class="s2">&quot;set Exif.GPSInfo.GPSLatitudeRef N&quot;</span> -M<span class="s2">&quot;set  Exif.GPSInfo.GPSLongtitude 1412213/100000 0/1 0/1&quot;</span> -M<span class="s2">&quot;set Exif.GPSInfo.GPSLongitudeRef E&quot;</span> <span class="nv">$f</span><span class="p">;</span>
  <span class="k">done</span>
</pre></div>
</div>
<p>The list of <em>exiv2 supported metadata keys</em> is at <a class="reference external" href="http://www.exiv2.org/tags.html">http://www.exiv2.org/tags.html</a></p>
</div>]]></description>
            <category><![CDATA[ IT ]]></category>
             <pubDate>Mon, 02 Jan 2012 00:00:00 +0100</pubDate>
        </item>
    
    </channel>
</rss>